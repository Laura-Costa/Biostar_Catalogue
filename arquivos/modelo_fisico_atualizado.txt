mysql -u helena -p --local_infile
ic2023
set global local_infile='ON';
drop database catalogo_gaia;
create database catalogo_gaia;
use catalogo_gaia;


create table Gaia (
	numero_ordinal_do_registro INT not null auto_increment primary key,
	designation CHAR(100),
	ra NUMERIC(65,30) not null,
	declination NUMERIC(65,30) not null,
	parallax NUMERIC(65,30) not null,
	parallax_error NUMERIC(65,30) not null,
	ruwe NUMERIC(65,30) not null, 
	phot_g_mean_mag NUMERIC(65,30) not null,  
	phot_bp_mean_mag NUMERIC(65,30) not null,  
	phot_rp_mean_mag NUMERIC(65,30) not null, 
	teff_gspphot NUMERIC(65,30) not null,
	teff_gspphot_lower NUMERIC(65,30) not null,
	teff_gspphot_upper NUMERIC(65,30) not null,
	logg_gspphot NUMERIC(65,30) not null,
	logg_gspphot_lower NUMERIC(65,30) not null, 
	logg_gspphot_upper NUMERIC(65,30) not null,
	mh_gspphot NUMERIC(65,30) not null,
	mh_gspphot_lower NUMERIC(65,30) not null,
	mh_gspphot_upper NUMERIC(65,30) not null,
	distance_gspphot NUMERIC(65,30) not null,
	distance_gspphot_lower NUMERIC(65,30) not null,
	distance_gspphot_upper NUMERIC(65,30) not null
);

create table Hipparcos (
	numero_ordinal_do_registro INT not null auto_increment primary key,
	HIP INT not null, 	
	Vmag NUMERIC(65,30) not null, 
	RAdeg NUMERIC(65,30) not null, 
	DEdeg NUMERIC(65,30) not null, 
	Plx NUMERIC(65,30) not null, 
	pmRA NUMERIC(65,30) not null, 
	pmDE NUMERIC(65,30) not null, 
	BTmag NUMERIC(65,30) not null, 
	VTmag NUMERIC(65,30) not null, 
	B_V NUMERIC(65,30) not null
);	

create table Diagrama_Gaia(
      codigo char(100) not null,
      diagrama blob not null,
      descricao char(100),
      primary key (codigo)
);

create table Diagrama_Hipparcos(
       codigo char(100) not null,
       diagrama blob not null,
       descricao char(100),
       primary key (codigo)
);

create table Produto_Gaia (
     numero_ordinal_do_registro int primary key,
     Mg double not null,
     MRp double not null,
     Bp_menos_Rp double not null,
     erro_de_mg double not null,
     erro_de_MRp double not null,
     foreign key (numero_ordinal_do_registro) references Source_Gaia(numero_ordinal_do_registro) on delete restrict 
);

create table Produto_Hipparcos(
      numero_ordinal_do_registro int primary key,
      MV double not null,
      MVt double not null,
      B_menos_V double not null,
      BT_menos_VT double not null,
      foreign key (numero_ordinal_do_registro) references Source_Hipparcos(numero_ordinal_do_registro) on delete restrict 
);

create table Produto_Gaia_é_plotado_em(
      numero_ordinal_do_registro INT not null,
      codigo char(100) not null,
      primary key (numero_ordinal_do_registro, codigo),
      foreign key (numero_ordinal_do_registro) references Produto_Gaia(numero_ordinal_do_registro),
      foreign key (codigo) references Diagrama_Gaia(codigo)
);

create table Produto_Hipparcos_é_plotado_em(
      numero_ordinal_do_registro INT not null,
      codigo char(100) not null,
      primary key (numero_ordinal_do_registro, codigo),
      foreign key (numero_ordinal_do_registro) references Produto_Hipparcos(numero_ordinal_do_registro),
      foreign key (codigo) references Diagrama_Hipparcos(codigo)
);
